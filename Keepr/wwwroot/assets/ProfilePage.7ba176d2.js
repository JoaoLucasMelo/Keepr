import{g as M,i as V,D as k,E,c as r,a as _,o as i,b as a,d as t,t as n,l as c,w as U,m as x,v as K,F as p,n as N,e as m,p as B,h as D,k as j}from"./vendor.7c4d75cf.js";import{_ as T,p as h,l as u,P as v,a as F,b as L,A as d}from"./index.7a412f31.js";const R={name:"Profile",setup(){document.title="Keepr | Profile";const l=M();let o=V(!1),f=V({});return k(async()=>{try{await h.getProfile(l.params.id)}catch(e){u.error(e),v.toast(e.message,"error")}}),E(async()=>{try{await h.getVaults(l.params.id)}catch(e){u.error(e),v.toast(e.message,"error")}}),k(async()=>{try{await h.getKeeps(l.params.id)}catch(e){u.error(e),v.toast(e.message,"error")}}),{edit:o,editable:f,activeProfile:r(()=>d.activeProfile),activeProfVaults:r(()=>d.activeProfVaults),activeProfKeeps:r(()=>d.activeProfKeeps),account:r(()=>d.account),user:r(()=>d.user),async logout(){F.logout({returnTo:window.location.origin})},async editProfile(){try{await L.editProfile(f.value),o.value=!o.value,f.value={}}catch(e){u.log(e),v.toast(e.message,"error")}}}}},g=l=>(B("data-v-1847e4df"),l=l(),D(),l),q={class:"Profile"},z={class:"row justify-content-center"},G={class:"col-md-10 margintop d-flex justified justify-content-md-between justify-content-center"},H={key:0,class:"d-md-flex"},J={class:"justified"},O=["src"],Q={class:"justified"},W={class:"d-flex"},X={class:"font m-0 username"},Y={class:"font mt-2 m-0 vaultskeeps"},Z={class:"font m-0 vaultskeeps"},$={key:1,class:"d-md-flex"},ee=g(()=>t("label",{for:"ProfileName",class:"form-label"},"Name:",-1)),te={class:"text-end me-2"},oe={class:"mb-3"},se=g(()=>t("label",{for:"ProfileImg",class:"form-label"},"ImgUrl:",-1)),ie={class:"text-center mt-3"},ae=g(()=>t("button",{type:"submit",class:"btn btn-outline-danger"},"Save",-1)),le={key:2,class:"d-md-flex"},ne={class:"justified"},ce=["src"],re={class:"justified"},de={class:"font m-0 username"},fe={class:"font mt-2 m-0 vaultskeeps"},_e={class:"font m-0 vaultskeeps"},me={key:3},ue={class:"row"},ve={class:"font vaults justified"},pe=j(" Vaults "),he={key:0,"data-bs-toggle":"modal","data-bs-target":"#newVaultModal",class:"mdi plusbtn mdi-plus action",title:"Add New Vault"},ge={class:"row mb-5"},Pe={class:"font vaults justified"},be=j(" Keeps "),ye={key:0,"data-bs-toggle":"modal","data-bs-target":"#newKeepModal",class:"mdi action plusbtn mdi-plus",title:"Add New Keep"},we={class:"masonry"};function Ve(l,o,f,e,ke,xe){var P,b,y,w;const S=_("Vault"),A=_("Keep"),I=_("NewVault"),C=_("NewKeep");return i(),a(p,null,[t("div",q,[t("div",z,[t("div",G,[e.account.id===e.activeProfile.id&&e.edit===!1?(i(),a("div",H,[t("div",J,[t("img",{class:"profpic elevation-5",src:e.activeProfile.picture,alt:""},null,8,O)]),t("div",Q,[t("div",W,[t("p",X,n(e.activeProfile.name),1),t("i",{onClick:o[0]||(o[0]=s=>e.edit=!e.edit),title:"Edit Profile",class:"mdi mdi-24px mdi-pencil ms-3 text-danger pb-2 action"})]),t("p",Y," Vaults: "+n(e.activeProfVaults.length),1),t("p",Z," Keeps: "+n(e.activeProfKeeps.length),1)])])):c("",!0),e.account.id===e.activeProfile.id&&e.edit===!0?(i(),a("div",$,[t("form",{class:"inputs font",onSubmit:o[4]||(o[4]=U((...s)=>e.editProfile&&e.editProfile(...s),["prevent"]))},[t("div",null,[ee,x(t("input",{type:"text",class:"form-control",id:"ProfileName",placeholder:"Name...",maxlength:"15","onUpdate:modelValue":o[1]||(o[1]=s=>e.editable.name=s)},null,512),[[K,e.editable.name]]),t("div",te,[t("i",null,[t("small",null,n(((P=e.editable.name)==null?void 0:P.length)?e.editable.name.length:0)+" /15",1)])])]),t("div",oe,[se,x(t("input",{type:"url",class:"form-control",id:"ProfileImg",placeholder:"ImgUrl...","onUpdate:modelValue":o[2]||(o[2]=s=>e.editable.picture=s)},null,512),[[K,e.editable.picture]])]),t("div",ie,[t("button",{onClick:o[3]||(o[3]=s=>e.edit=!e.edit),class:"btn me-2"},"Cancel"),ae])],32)])):c("",!0),e.account.id!==e.activeProfile.id?(i(),a("div",le,[t("div",ne,[t("img",{class:"profpic elevation-5",src:e.activeProfile.picture,alt:""},null,8,ce)]),t("div",re,[t("p",de,n(e.activeProfile.name),1),t("p",fe," Vaults: "+n(e.activeProfVaults.length),1),t("p",_e," Keeps: "+n(e.activeProfKeeps.length),1)])])):c("",!0),e.user.isAuthenticated&&((b=e.account)==null?void 0:b.id)===e.activeProfile.id&&e.edit===!1?(i(),a("div",me,[t("button",{onClick:o[5]||(o[5]=(...s)=>e.logout&&e.logout(...s)),class:"btn btn-outline-danger font logout"}," Logout ")])):c("",!0)])]),t("div",ue,[t("div",ve,[t("p",null,[pe,((y=e.account)==null?void 0:y.id)===e.activeProfile.id&&e.user.isAuthenticated?(i(),a("i",he)):c("",!0)])]),(i(!0),a(p,null,N(e.activeProfVaults,s=>(i(),a("div",{class:"col-4 col-md-2 d-flex justify-content-center p-2",key:s.id},[m(S,{vault:s},null,8,["vault"])]))),128))]),t("div",ge,[t("div",Pe,[t("p",null,[be,((w=e.account)==null?void 0:w.id)===e.activeProfile.id&&e.user.isAuthenticated?(i(),a("i",ye)):c("",!0)])]),t("div",we,[(i(!0),a(p,null,N(e.activeProfKeeps,s=>(i(),a("div",{class:"item",key:s.id},[m(A,{keep:s},null,8,["keep"])]))),128))])])]),m(I),m(C)],64)}var je=T(R,[["render",Ve],["__scopeId","data-v-1847e4df"]]);export{je as default};
