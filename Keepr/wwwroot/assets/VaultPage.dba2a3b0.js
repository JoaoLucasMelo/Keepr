import{g as D,u as I,D as g,i as y,c as m,a as P,o,b as s,d as e,t as i,l as c,w as S,m as k,v as x,F as j,n as C,p as K,h as N,e as B}from"./vendor.7c4d75cf.js";import{_ as M,k as T,P as r,v as _,l as w,A as f}from"./index.7a412f31.js";const A={name:"Vault",setup(){document.title="Keepr | Vault";const n=D(),a=I();g(async()=>{try{await T.getByVaultKeeps(n.params.id)}catch{a.push({name:"Home"}),r.toast("This is a Private Vault","info")}}),g(async()=>{try{await _.getVault(n.params.id)}catch{a.push({name:"Home"}),r.toast("This is a Private Vault","info")}});let u=y(!1),t=y({});return{edit:u,editable:t,router:a,vaultkeeps:m(()=>f.activeVaultKeeps),vault:m(()=>f.activeVault),account:m(()=>f.account),async removeVault(d,V){try{await r.confirm()&&(a.push({name:"Profile",params:{id:V}}),await _.removeVault(d),r.toast("Vault deleted!","success"))}catch(v){w.error(v),r.toast(v.message,"error")}},async editVault(){try{await _.editVault(this.vault.id,t.value),u.value=!u.value,t.value={}}catch(d){w.log(d),r.toast(d.message,"error")}}}}},p=n=>(K("data-v-bc4d9e68"),n=n(),N(),n),E={class:"VaultPage"},F={class:"row justify-content-center"},H={key:0,class:"col-10 d-flex justified justify-content-between"},R={class:"justified"},U={class:"d-flex"},L={class:"font vaultname m-0"},q={class:"font vaultdescription m-0"},z={class:"font keeps m-0"},G={class:"align-self-center"},J={key:1,class:"col-10 d-flex justify-content-between mt-4"},O=p(()=>e("label",{for:"VaultName",class:"form-label"},"Vault Name:",-1)),Q={class:"text-end me-2"},W=p(()=>e("label",{for:"VaultDescription",class:"form-label"},"Vault Description:",-1)),X={class:"text-end me-2"},Y={class:"text-center mt-2"},Z=p(()=>e("button",{type:"submit",class:"btn btn-outline-danger"},"Save",-1)),$={key:2,class:"col-10 d-flex justify-content-between"},tt={class:"font vaultname m-0"},et={class:"font vaultdescription m-0"},at={class:"font keeps m-0"},lt={class:"align-self-center"},ot={class:"masonry mt-5"};function st(n,a,u,t,d,V){var h,b;const v=P("Keep");return o(),s("div",E,[e("div",F,[t.account.id===t.vault.creatorId&&t.edit===!1?(o(),s("div",H,[e("div",R,[e("div",U,[e("p",L,i(t.vault.name),1),e("i",{onClick:a[0]||(a[0]=l=>t.edit=!t.edit),title:"Edit Profile",class:"mdi pencil mdi-24px mdi-pencil ms-3 text-danger pb-2 action"})]),e("p",q,i(t.vault.description),1),e("p",z,"Keeps: "+i(t.vaultkeeps.length),1)]),e("div",G,[t.account.id===t.vault.creatorId?(o(),s("button",{key:0,title:"Delete this Vault",onClick:a[1]||(a[1]=l=>t.removeVault(t.vault.id,t.vault.creatorId)),class:"btn font deletevault border border-2 p-2"}," Delete Vault ")):c("",!0)])])):c("",!0),t.account.id===t.vault.creatorId&&t.edit===!0?(o(),s("div",J,[e("form",{class:"inputs font",onSubmit:a[5]||(a[5]=S((...l)=>t.editVault&&t.editVault(...l),["prevent"]))},[e("div",null,[O,k(e("input",{type:"text",class:"form-control",id:"VaultName",placeholder:"Vault Name...",maxlength:"15","onUpdate:modelValue":a[2]||(a[2]=l=>t.editable.name=l)},null,512),[[x,t.editable.name]]),e("div",Q,[e("i",null,[e("small",null,i(((h=t.editable.name)==null?void 0:h.length)?t.editable.name.length:0)+" /15",1)])])]),e("div",null,[W,k(e("textarea",{type:"text",class:"form-control",id:"VaultDescription",placeholder:"Vault Description...",maxlength:"200","onUpdate:modelValue":a[3]||(a[3]=l=>t.editable.description=l)},null,512),[[x,t.editable.description]]),e("div",X,[e("i",null,[e("small",null,i(((b=t.editable.description)==null?void 0:b.length)?t.editable.description.length:0)+" /200",1)])])]),e("div",Y,[e("button",{onClick:a[4]||(a[4]=l=>t.edit=!t.edit),class:"btn me-2"},"Cancel"),Z])],32)])):c("",!0),t.account.id!==t.vault.creatorId?(o(),s("div",$,[e("div",null,[e("p",tt,i(t.vault.name),1),e("p",et,i(t.vault.description),1),e("p",at,"Keeps: "+i(t.vaultkeeps.length),1)]),e("div",lt,[t.account.id===t.vault.creatorId?(o(),s("button",{key:0,title:"Delete this Vault",onClick:a[6]||(a[6]=l=>t.removeVault(t.vault.id,t.vault.creatorId)),class:"btn font deletevault border border-2 p-2"}," Delete Vault ")):c("",!0)])])):c("",!0)]),e("div",ot,[(o(!0),s(j,null,C(t.vaultkeeps,l=>(o(),s("div",{class:"item",key:l.id},[B(v,{keep:l,vault:t.vault},null,8,["keep","vault"])]))),128))])])}var dt=M(A,[["render",st],["__scopeId","data-v-bc4d9e68"]]);export{dt as default};
